<!--
 * @Author: SnotlingLiu<snotlingliu@gmail.com/>
 * @Date: 2023-02-14 09:34:37
 * @LastEditors: SnotlingLiu<snotlingliu@gmail.com/>
 * @LastEditTime: 2023-02-14 10:06:21
 * @Description: 
-->

<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Use correct character set. -->
    <meta charset="utf-8" />
    <!-- Tell IE to use the latest, best version. -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Make the application on mobile take up the full browser screen and disable user scaling. -->
    <script src="../../Build/VRGlobe/VRGlobe.js"></script>
    <link rel="stylesheet" href="../../Build/VRGlobe/Widgets/widgets.css" />
    <title>模型图层(ModelTilesetLayer)</title>
    <style>
        html,
        body,
        #main {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <div id="main"></div>

    <body>
        <div id="main"></div>
        <script>
            window.Space_BASEURL = window.location.origin + "/Build/VRGlobe/";
            var space = new VRGlobe.Space('main');

            space.__v.scene.imageryLayers.addImageryProvider(
                new VRGlobe.ImageryLayer(VRGlobe.Type.IMAGERYESRIIMG)
            );
            space.__v.terrainProvider = new VRGlobe.TerrainLayer(VRGlobe.Type.TERRAINSEELEVEL);

            // 加载白模
            let model = new VRGlobe.ModelTilesetLayer('http://192.168.1.119:6006/CDBuild3DTileset/tileset.json');
            space.__v.scene.primitives.add(model);
            model.readyPromise.then(tileset => {
                // 跳转到白模
                space.__v.camera.flyToBoundingSphere(tileset.boundingSphere);
            });

            // 设置模型颜色
            function setColor(color) {
                color = color || VRGlobe.Color.fromRandom({
                    alpha: 1
                });
                model.colorPropertyType = VRGlobe.Type.PROPERTYSPACIAL;
                model.color = color;
            }

            // 模型按照唯一值设色
            function setColorByUniqueValue() {
                model.attributeName = "county";
                model.colorPropertyType = VRGlobe.Type.PROPERTYUNIQUE;
                model.colorProperty.removeAllCondition();
                model.colorProperty.addCondition("双流区", VRGlobe.Color.fromCssColorString('rgb(252, 202, 209)'));
                model.colorProperty.addCondition("大邑县", VRGlobe.Color.fromCssColorString('rgb(185, 252, 182)'));
                model.colorProperty.addCondition("崇州市", VRGlobe.Color.fromCssColorString('rgb(187, 240, 252)'));
                model.colorProperty.addCondition("彭州市", VRGlobe.Color.fromCssColorString('rgb(185, 179, 252)'));
                model.colorProperty.addCondition("成华区", VRGlobe.Color.fromCssColorString('rgb(252, 237, 184)'));
                model.colorProperty.addCondition("新津县", VRGlobe.Color.fromCssColorString('rgb(252, 179, 235)'));
                model.colorProperty.addCondition("新都区", VRGlobe.Color.fromCssColorString('rgb(217, 215, 252)'));
                model.colorProperty.addCondition("武侯区", VRGlobe.Color.fromCssColorString('rgb(202, 252, 221)'));
                model.colorProperty.addCondition("温江区", VRGlobe.Color.fromCssColorString('rgb(252, 207, 182)'));
                model.colorProperty.addCondition("简阳市", VRGlobe.Color.fromCssColorString('rgb(237, 252, 210)'));
                model.colorProperty.addCondition("蒲江县", VRGlobe.Color.fromCssColorString('rgb(252, 207, 245)'));
                model.colorProperty.addCondition("邛崃市", VRGlobe.Color.fromCssColorString('rgb(179, 210, 252)'));
                model.colorProperty.addCondition("郫都区", VRGlobe.Color.fromCssColorString('rgb(252, 182, 210)'));
                model.colorProperty.addCondition("都江堰市", VRGlobe.Color.fromCssColorString('rgb(223, 184, 252)'));
                model.colorProperty.addCondition("金堂县", VRGlobe.Color.fromCssColorString('rgb(228, 252, 187)'));
                model.colorProperty.addCondition("金牛区", VRGlobe.Color.fromCssColorString('rgb(252, 240, 215)'));
                model.colorProperty.addCondition("锦江区", VRGlobe.Color.fromCssColorString('rgb(202, 197, 252)'));
                model.colorProperty.addCondition("青白江区", VRGlobe.Color.fromCssColorString('rgb(215, 252, 243)'));
                model.colorProperty.addCondition("青羊区", VRGlobe.Color.fromCssColorString('rgb(252, 222, 215)'));
                model.colorProperty.addCondition("龙泉驿区", VRGlobe.Color.fromCssColorString('rgb(202, 252, 197)'));
                model.updateStyle();
            }

            // 模型按照面积分级设色
            function setColorByGraduatedValue() {
                model.attributeName = "area";
                model.colorPropertyType = VRGlobe.Type.PROPERTYGRADUATED;
                model.colorProperty.removeAllCondition();
                model.colorProperty.addCondition("(-,100]", VRGlobe.Color.fromCssColorString('rgba(84, 255, 159, 0.7843137254901961)'));
                model.colorProperty.addCondition("(100,250]", VRGlobe.Color.fromCssColorString('rgba(0, 255, 127, 0.7843137254901961)'));
                model.colorProperty.addCondition("(250,450]", VRGlobe.Color.fromCssColorString('rgba(0, 255, 0, 0.7843137254901961)'));
                model.colorProperty.addCondition("(450,+)", VRGlobe.Color.fromCssColorString('rgba(192, 255, 62, 0.7843137254901961)'));
                model.updateStyle();
            }

            // 模型按照高度分级设色
            function setColorByHeight() {
                model.attributeName = "height";
                model.colorPropertyType = VRGlobe.Type.PROPERTYGRADUATED;
                model.colorProperty.removeAllCondition();
                model.colorProperty.addCondition("(-,20]", VRGlobe.Color.fromCssColorString('rgb(255, 160, 122)'));
                model.colorProperty.addCondition("(20,50]", VRGlobe.Color.fromCssColorString('rgb(240, 128, 128)'));
                model.colorProperty.addCondition("(50,90]", VRGlobe.Color.fromCssColorString('rgb(255, 99, 71)'));
                model.updateStyle();
            }

        </script>
    </body>
</body>

</html>